from pathlib import Path
path = Path(r"client/src/App.tsx")
text = path.read_text(encoding="utf-8")
needle = "function CompareAdvisor({ rows, tariffs }: { rows: RateRow[]; tariffs: TariffRow[] }) {"
if needle not in text:
    raise SystemExit("target not found")
block = "\n\ntype RateScenario = {\n  rate: number;\n  key: string;\n  minSalary: SalaryLevel;\n  salaryBand?: \"above700k\" | \"below700k\";\n  requiresCreditCard?: \"yes\" | \"no\";\n  requiresInternet?: \"yes\" | \"no\";\n  label: string;\n  benchmark?: \"AWPR\" | \"AWPLR\";\n  benchmarkDelta?: number;\n  benchmarkExpr?: string;\n};\n\ntype ScenarioSelection = {\n  rate?: number;\n  scenario?: RateScenario;\n  eligible: boolean;\n};\n\nfunction parseBenchmarkRate(\n  value: any,\n  refRates: { awpr?: number; awplr?: number }\n): { rate: number; benchmark: \"AWPR\" | \"AWPLR\"; delta: number; expr: string } | undefined {\n  if (typeof value !== \"string\") return undefined;\n  const match = value.toLowerCase().match(/\\b(awpr|awplr)\\s*([+\\-])\\s*([0-9]+(?:\\.[0-9]+)?)\\s*%?/i);\n  if (!match) return undefined;\n  const benchmark = match[1].toUpperCase() as \"AWPR\" | \"AWPLR\";\n  const sign = match[2] === \"-\" ? -1 : 1;\n  const delta = parseFloat(match[3]);\n  if (!isFinite(delta)) return undefined;\n  const base = benchmark === \"AWPR\" ? refRates.awpr : refRates.awplr;\n  if (typeof base !== \"number\") return undefined;\n  const expr = f"{benchmark} {\"+\" if sign == 1 else \"-\"} {delta}%";\n  return { rate: base + sign * delta, benchmark, delta: sign * delta, expr };\n}\n\nfunction parseRateScenarioKey(\n  key: string,\n  value: any,\n  refRates: { awpr?: number; awplr?: number }\n): RateScenario | undefined {\n  const benchmark = parseBenchmarkRate(value, refRates);\n  const rate = benchmark.rate if benchmark else readNumber(value);\n  if (rate is None):\n    return None\n\n  lower = key.lower()
